(function(){"use strict";/*! For license information please see thread.worker.js.LICENSE.txt */(function(){var oe={19:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var r={exports:{}},s=r.exports={},o,l;function n(){throw new Error("setTimeout has not been defined")}function g(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?o=setTimeout:o=n}catch{o=n}try{typeof clearTimeout=="function"?l=clearTimeout:l=g}catch{l=g}})();function C(p){if(o===setTimeout)return setTimeout(p,0);if((o===n||!o)&&setTimeout)return o=setTimeout,setTimeout(p,0);try{return o(p,0)}catch{try{return o.call(null,p,0)}catch{return o.call(this,p,0)}}}function m(p){if(l===clearTimeout)return clearTimeout(p);if((l===g||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(p);try{return l(p)}catch{try{return l.call(null,p)}catch{return l.call(this,p)}}}var a=[],i=!1,c,d=-1;function u(){!i||!c||(i=!1,c.length?a=c.concat(a):d=-1,a.length&&f())}function f(){if(!i){var p=C(u);i=!0;for(var x=a.length;x;){for(c=a,a=[];++d<x;)c&&c[d].run();d=-1,x=a.length}c=null,i=!1,m(p)}}s.nextTick=function(p){var x=new Array(arguments.length-1);if(arguments.length>1)for(var M=1;M<arguments.length;M++)x[M-1]=arguments[M];a.push(new h(p,x)),a.length===1&&!i&&C(f)};function h(p,x){this.fun=p,this.array=x}h.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={};function w(){}s.on=w,s.addListener=w,s.once=w,s.off=w,s.removeListener=w,s.removeAllListeners=w,s.emit=w,s.prependListener=w,s.prependOnceListener=w,s.listeners=function(p){return[]},s.binding=function(p){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(p){throw new Error("process.chdir is not supported")},s.umask=function(){return 0};function v(){}var b=r.exports.browser,y=v,F=r.exports.binding,k=v,N=1,L={},V=v,_=v,z=v,S=v,W=v,ee="browser",te="browser",re="browser",ne=[],se={nextTick:r.exports.nextTick,title:r.exports.title,browser:b,env:r.exports.env,argv:r.exports.argv,version:r.exports.version,versions:r.exports.versions,on:r.exports.on,addListener:r.exports.addListener,once:r.exports.once,off:r.exports.off,removeListener:r.exports.removeListener,removeAllListeners:r.exports.removeAllListeners,emit:r.exports.emit,emitWarning:y,prependListener:r.exports.prependListener,prependOnceListener:r.exports.prependOnceListener,listeners:r.exports.listeners,binding:F,cwd:r.exports.cwd,chdir:r.exports.chdir,umask:r.exports.umask,exit:k,pid:N,features:L,kill:V,dlopen:_,uptime:z,memoryUsage:S,uvCounters:W,platform:ee,arch:te,execPath:re,execArgv:ne};e.addListener=r.exports.addListener,e.arch=te,e.argv=r.exports.argv,e.binding=F,e.browser=b,e.chdir=r.exports.chdir,e.cwd=r.exports.cwd,e.default=se,e.dlopen=_,e.emit=r.exports.emit,e.emitWarning=y,e.env=r.exports.env,e.execArgv=ne,e.execPath=re,e.exit=k,e.features=L,e.kill=V,e.listeners=r.exports.listeners,e.memoryUsage=S,e.nextTick=r.exports.nextTick,e.off=r.exports.off,e.on=r.exports.on,e.once=r.exports.once,e.pid=N,e.platform=ee,e.prependListener=r.exports.prependListener,e.prependOnceListener=r.exports.prependOnceListener,e.removeAllListeners=r.exports.removeAllListeners,e.removeListener=r.exports.removeListener,e.title=r.exports.title,e.umask=r.exports.umask,e.uptime=z,e.uvCounters=W,e.version=r.exports.version,e.versions=r.exports.versions,e=t.exports=se},585:t=>{var e=1e3,r=e*60,s=r*60,o=s*24,l=o*7,n=o*365.25;t.exports=function(i,c){c=c||{};var d=typeof i;if(d==="string"&&i.length>0)return g(i);if(d==="number"&&isFinite(i))return c.long?m(i):C(i);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))};function g(i){if(i=String(i),!(i.length>100)){var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(c){var d=parseFloat(c[1]),u=(c[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return d*n;case"weeks":case"week":case"w":return d*l;case"days":case"day":case"d":return d*o;case"hours":case"hour":case"hrs":case"hr":case"h":return d*s;case"minutes":case"minute":case"mins":case"min":case"m":return d*r;case"seconds":case"second":case"secs":case"sec":case"s":return d*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function C(i){var c=Math.abs(i);return c>=o?Math.round(i/o)+"d":c>=s?Math.round(i/s)+"h":c>=r?Math.round(i/r)+"m":c>=e?Math.round(i/e)+"s":i+"ms"}function m(i){var c=Math.abs(i);return c>=o?a(i,c,o,"day"):c>=s?a(i,c,s,"hour"):c>=r?a(i,c,r,"minute"):c>=e?a(i,c,e,"second"):i+" ms"}function a(i,c,d,u){var f=c>=d*1.5;return Math.round(i/d)+" "+u+(f?"s":"")}},736:(t,e,r)=>{function s(o){n.debug=n,n.default=n,n.coerce=c,n.disable=m,n.enable=C,n.enabled=a,n.humanize=r(585),n.destroy=d,Object.keys(o).forEach(u=>{n[u]=o[u]}),n.names=[],n.skips=[],n.formatters={};function l(u){let f=0;for(let h=0;h<u.length;h++)f=(f<<5)-f+u.charCodeAt(h),f|=0;return n.colors[Math.abs(f)%n.colors.length]}n.selectColor=l;function n(u){let f,h=null,w,v;function b(...y){if(!b.enabled)return;const F=b,k=Number(new Date),N=k-(f||k);F.diff=N,F.prev=f,F.curr=k,f=k,y[0]=n.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let L=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(_,z)=>{if(_==="%%")return"%";L++;const S=n.formatters[z];if(typeof S=="function"){const W=y[L];_=S.call(F,W),y.splice(L,1),L--}return _}),n.formatArgs.call(F,y),(F.log||n.log).apply(F,y)}return b.namespace=u,b.useColors=n.useColors(),b.color=n.selectColor(u),b.extend=g,b.destroy=n.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(w!==n.namespaces&&(w=n.namespaces,v=n.enabled(u)),v),set:y=>{h=y}}),typeof n.init=="function"&&n.init(b),b}function g(u,f){const h=n(this.namespace+(typeof f>"u"?":":f)+u);return h.log=this.log,h}function C(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];let f;const h=(typeof u=="string"?u:"").split(/[\s,]+/),w=h.length;for(f=0;f<w;f++)h[f]&&(u=h[f].replace(/\*/g,".*?"),u[0]==="-"?n.skips.push(new RegExp("^"+u.slice(1)+"$")):n.names.push(new RegExp("^"+u+"$")))}function m(){const u=[...n.names.map(i),...n.skips.map(i).map(f=>"-"+f)].join(",");return n.enable(""),u}function a(u){if(u[u.length-1]==="*")return!0;let f,h;for(f=0,h=n.skips.length;f<h;f++)if(n.skips[f].test(u))return!1;for(f=0,h=n.names.length;f<h;f++)if(n.names[f].test(u))return!0;return!1}function i(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}t.exports=s},833:(t,e,r)=>{var s=r(19);e.formatArgs=l,e.save=n,e.load=g,e.useColors=o,e.storage=C(),e.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function l(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;a.splice(1,0,i,"color: inherit");let c=0,d=0;a[0].replace(/%[a-zA-Z%]/g,u=>{u!=="%%"&&(c++,u==="%c"&&(d=c))}),a.splice(d,0,i)}e.log=console.debug||console.log||(()=>{});function n(a){try{a?e.storage.setItem("debug",a):e.storage.removeItem("debug")}catch{}}function g(){let a;try{a=e.storage.getItem("debug")}catch{}return!a&&typeof s<"u"&&"env"in s&&(a=s.env.DEBUG),a}function C(){try{return localStorage}catch{}}t.exports=r(736)(e);const{formatters:m}=t.exports;m.j=function(a){try{return JSON.stringify(a)}catch(i){return"[UnexpectedJSONParseError]: "+i.message}}}},B={};function E(t){var e=B[t];if(e!==void 0)return e.exports;var r=B[t]={exports:{}};return oe[t](r,r.exports,E),r.exports}E.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return E.d(e,{a:e}),e},E.d=(t,e)=>{for(var r in e)E.o(e,r)&&!E.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},E.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);const H=Symbol("Comlink.proxy"),ie=Symbol("Comlink.endpoint"),ae=Symbol("Comlink.releaseProxy"),D=Symbol("Comlink.finalizer"),O=Symbol("Comlink.thrown"),G=t=>typeof t=="object"&&t!==null||typeof t=="function",ce={canHandle:t=>G(t)&&t[H],serialize(t){const{port1:e,port2:r}=new MessageChannel;return U(t,e),[r,[r]]},deserialize(t){return t.start(),de(t)}},ue={canHandle:t=>G(t)&&O in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},q=new Map([["proxy",ce],["throw",ue]]);function le(t,e){for(const r of t)if(e===r||r==="*"||r instanceof RegExp&&r.test(e))return!0;return!1}function U(t,e=globalThis,r=["*"]){e.addEventListener("message",function s(o){if(!o||!o.data)return;if(!le(r,o.origin)){console.warn(`Invalid origin '${o.origin}' for comlink proxy`);return}const{id:l,type:n,path:g}=Object.assign({path:[]},o.data),C=(o.data.argumentList||[]).map(T);let m;try{const a=g.slice(0,-1).reduce((c,d)=>c[d],t),i=g.reduce((c,d)=>c[d],t);switch(n){case"GET":m=i;break;case"SET":a[g.slice(-1)[0]]=T(o.data.value),m=!0;break;case"APPLY":m=i.apply(a,C);break;case"CONSTRUCT":{const c=new i(...C);m=Ce(c)}break;case"ENDPOINT":{const{port1:c,port2:d}=new MessageChannel;U(t,d),m=pe(c,[c])}break;case"RELEASE":m=void 0;break;default:return}}catch(a){m={value:a,[O]:0}}Promise.resolve(m).catch(a=>({value:a,[O]:0})).then(a=>{const[i,c]=R(a);e.postMessage(Object.assign(Object.assign({},i),{id:l}),c),n==="RELEASE"&&(e.removeEventListener("message",s),J(e),D in t&&typeof t[D]=="function"&&t[D]())}).catch(a=>{const[i,c]=R({value:new TypeError("Unserializable return value"),[O]:0});e.postMessage(Object.assign(Object.assign({},i),{id:l}),c)})}),e.start&&e.start()}function fe(t){return t.constructor.name==="MessagePort"}function J(t){fe(t)&&t.close()}function de(t,e){return $(t,[],e)}function P(t){if(t)throw new Error("Proxy has been released and is not useable")}function Y(t){return A(t,{type:"RELEASE"}).then(()=>{J(t)})}const j=new WeakMap,I="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(j.get(t)||0)-1;j.set(t,e),e===0&&Y(t)});function ge(t,e){const r=(j.get(e)||0)+1;j.set(e,r),I&&I.register(t,e,t)}function me(t){I&&I.unregister(t)}function $(t,e=[],r=function(){}){let s=!1;const o=new Proxy(r,{get(l,n){if(P(s),n===ae)return()=>{me(o),Y(t),s=!0};if(n==="then"){if(e.length===0)return{then:()=>o};const g=A(t,{type:"GET",path:e.map(C=>C.toString())}).then(T);return g.then.bind(g)}return $(t,[...e,n])},set(l,n,g){P(s);const[C,m]=R(g);return A(t,{type:"SET",path:[...e,n].map(a=>a.toString()),value:C},m).then(T)},apply(l,n,g){P(s);const C=e[e.length-1];if(C===ie)return A(t,{type:"ENDPOINT"}).then(T);if(C==="bind")return $(t,e.slice(0,-1));const[m,a]=Q(g);return A(t,{type:"APPLY",path:e.map(i=>i.toString()),argumentList:m},a).then(T)},construct(l,n){P(s);const[g,C]=Q(n);return A(t,{type:"CONSTRUCT",path:e.map(m=>m.toString()),argumentList:g},C).then(T)}});return ge(o,t),o}function he(t){return Array.prototype.concat.apply([],t)}function Q(t){const e=t.map(R);return[e.map(r=>r[0]),he(e.map(r=>r[1]))]}const X=new WeakMap;function pe(t,e){return X.set(t,e),t}function Ce(t){return Object.assign(t,{[H]:!0})}function R(t){for(const[e,r]of q)if(r.canHandle(t)){const[s,o]=r.serialize(t);return[{type:"HANDLER",name:e,value:s},o]}return[{type:"RAW",value:t},X.get(t)||[]]}function T(t){switch(t.type){case"HANDLER":return q.get(t.name).deserialize(t.value);case"RAW":return t.value}}function A(t,e,r){return new Promise(s=>{const o=ye();t.addEventListener("message",function l(n){!n.data||!n.data.id||n.data.id!==o||(t.removeEventListener("message",l),s(n.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:o},e),r)})}function ye(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function we(){return console.log}function Z(){self.close()}const be={ready:!0};var ve=E(833),K=E.n(ve);const Fe=t=>{const r=(()=>{if(typeof window<"u"&&window.crypto)return window.crypto;if(typeof globalThis<"u"&&globalThis.crypto)return globalThis.crypto})();if(!r)throw new Error("randomBytes UnsupportedEnvironment");const s=new Uint8Array(t),o=65536;if(t>o)for(let l=0;l<t;l+=o)r.getRandomValues(s.subarray(l,l+o));else r.getRandomValues(s);return s};class xe{constructor(){this.memStore={},this.logger=K()("bb.js:bb_wasm_base")}getImportObj(e){return{wasi_snapshot_preview1:{random_get:(s,o)=>{s=s>>>0;const l=Fe(o);this.getMemory().set(l,s)},clock_time_get:(s,o,l)=>{l=l>>>0;const n=BigInt(new Date().getTime())*1000000n;new DataView(this.getMemory().buffer).setBigUint64(l,n,!0)},proc_exit:()=>{throw this.logger("PANIC: proc_exit was called."),new Error}},env:{logstr:s=>{const o=this.stringFromAddress(s),l=this.getMemory(),n=`${o} (mem: ${(l.length/(1024*1024)).toFixed(2)}MiB)`;this.logger(n)},get_data:(s,o)=>{const l=this.stringFromAddress(s);o=o>>>0;const n=this.memStore[l];if(!n){this.logger(`get_data miss ${l}`);return}this.writeMemory(o,n)},set_data:(s,o,l)=>{const n=this.stringFromAddress(s);o=o>>>0,this.memStore[n]=this.getMemorySlice(o,o+l)},memory:e}}}exports(){return this.instance.exports}call(e,...r){if(!this.exports()[e])throw new Error(`WASM function ${e} not found.`);try{return this.exports()[e](...r)>>>0}catch(s){const o=`WASM function ${e} aborted, error: ${s}`;throw this.logger(o),this.logger(s.stack),s}}memSize(){return this.getMemory().length}getMemorySlice(e,r){return this.getMemory().subarray(e,r).slice()}writeMemory(e,r){this.getMemory().set(r,e)}getMemory(){return new Uint8Array(this.memory.buffer)}stringFromAddress(e){e=e>>>0;const r=this.getMemory();let s=e;for(;r[s]!==0;++s);return new TextDecoder("ascii").decode(r.slice(e,s))}}class Ee extends xe{async initThread(e,r){this.logger=we()||this.logger,this.memory=r,this.instance=await WebAssembly.instantiate(e,this.getImportObj(this.memory))}destroy(){Z()}getImportObj(e){const r=super.getImportObj(e);return{...r,wasi:{"thread-spawn":()=>{this.logger("PANIC: threads cannot spawn threads!"),this.logger(new Error().stack),Z()}},env:{...r.env,env_hardware_concurrency:()=>1}}}}addEventListener("message",t=>{t.data.debug&&K().enable(t.data.debug)}),U(new Ee),postMessage(be)})()})();
