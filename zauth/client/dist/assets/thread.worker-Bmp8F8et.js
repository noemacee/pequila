(function(){"use strict";var B={};/*! For license information please see thread.worker.js.LICENSE.txt */var H;function ae(){return H||(H=1,function(){var ce={19:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t={exports:{}},s=t.exports={},o,l;function n(){throw new Error("setTimeout has not been defined")}function g(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?o=setTimeout:o=n}catch{o=n}try{typeof clearTimeout=="function"?l=clearTimeout:l=g}catch{l=g}})();function C(p){if(o===setTimeout)return setTimeout(p,0);if((o===n||!o)&&setTimeout)return o=setTimeout,setTimeout(p,0);try{return o(p,0)}catch{try{return o.call(null,p,0)}catch{return o.call(this,p,0)}}}function m(p){if(l===clearTimeout)return clearTimeout(p);if((l===g||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(p);try{return l(p)}catch{try{return l.call(null,p)}catch{return l.call(this,p)}}}var a=[],i=!1,c,d=-1;function u(){!i||!c||(i=!1,c.length?a=c.concat(a):d=-1,a.length&&f())}function f(){if(!i){var p=C(u);i=!0;for(var x=a.length;x;){for(c=a,a=[];++d<x;)c&&c[d].run();d=-1,x=a.length}c=null,i=!1,m(p)}}s.nextTick=function(p){var x=new Array(arguments.length-1);if(arguments.length>1)for(var M=1;M<arguments.length;M++)x[M-1]=arguments[M];a.push(new h(p,x)),a.length===1&&!i&&C(f)};function h(p,x){this.fun=p,this.array=x}h.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={};function w(){}s.on=w,s.addListener=w,s.once=w,s.off=w,s.removeListener=w,s.removeAllListeners=w,s.emit=w,s.prependListener=w,s.prependOnceListener=w,s.listeners=function(p){return[]},s.binding=function(p){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(p){throw new Error("process.chdir is not supported")},s.umask=function(){return 0};function v(){}var b=t.exports.browser,y=v,F=t.exports.binding,k=v,N=1,_={},V=v,A=v,z=v,S=v,W=v,te="browser",ne="browser",se="browser",oe=[],ie={nextTick:t.exports.nextTick,title:t.exports.title,browser:b,env:t.exports.env,argv:t.exports.argv,version:t.exports.version,versions:t.exports.versions,on:t.exports.on,addListener:t.exports.addListener,once:t.exports.once,off:t.exports.off,removeListener:t.exports.removeListener,removeAllListeners:t.exports.removeAllListeners,emit:t.exports.emit,emitWarning:y,prependListener:t.exports.prependListener,prependOnceListener:t.exports.prependOnceListener,listeners:t.exports.listeners,binding:F,cwd:t.exports.cwd,chdir:t.exports.chdir,umask:t.exports.umask,exit:k,pid:N,features:_,kill:V,dlopen:A,uptime:z,memoryUsage:S,uvCounters:W,platform:te,arch:ne,execPath:se,execArgv:oe};e.addListener=t.exports.addListener,e.arch=ne,e.argv=t.exports.argv,e.binding=F,e.browser=b,e.chdir=t.exports.chdir,e.cwd=t.exports.cwd,e.default=ie,e.dlopen=A,e.emit=t.exports.emit,e.emitWarning=y,e.env=t.exports.env,e.execArgv=oe,e.execPath=se,e.exit=k,e.features=_,e.kill=V,e.listeners=t.exports.listeners,e.memoryUsage=S,e.nextTick=t.exports.nextTick,e.off=t.exports.off,e.on=t.exports.on,e.once=t.exports.once,e.pid=N,e.platform=te,e.prependListener=t.exports.prependListener,e.prependOnceListener=t.exports.prependOnceListener,e.removeAllListeners=t.exports.removeAllListeners,e.removeListener=t.exports.removeListener,e.title=t.exports.title,e.umask=t.exports.umask,e.uptime=z,e.uvCounters=W,e.version=t.exports.version,e.versions=t.exports.versions,e=r.exports=ie},585:r=>{var e=1e3,t=e*60,s=t*60,o=s*24,l=o*7,n=o*365.25;r.exports=function(i,c){c=c||{};var d=typeof i;if(d==="string"&&i.length>0)return g(i);if(d==="number"&&isFinite(i))return c.long?m(i):C(i);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))};function g(i){if(i=String(i),!(i.length>100)){var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(c){var d=parseFloat(c[1]),u=(c[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return d*n;case"weeks":case"week":case"w":return d*l;case"days":case"day":case"d":return d*o;case"hours":case"hour":case"hrs":case"hr":case"h":return d*s;case"minutes":case"minute":case"mins":case"min":case"m":return d*t;case"seconds":case"second":case"secs":case"sec":case"s":return d*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function C(i){var c=Math.abs(i);return c>=o?Math.round(i/o)+"d":c>=s?Math.round(i/s)+"h":c>=t?Math.round(i/t)+"m":c>=e?Math.round(i/e)+"s":i+"ms"}function m(i){var c=Math.abs(i);return c>=o?a(i,c,o,"day"):c>=s?a(i,c,s,"hour"):c>=t?a(i,c,t,"minute"):c>=e?a(i,c,e,"second"):i+" ms"}function a(i,c,d,u){var f=c>=d*1.5;return Math.round(i/d)+" "+u+(f?"s":"")}},736:(r,e,t)=>{function s(o){n.debug=n,n.default=n,n.coerce=c,n.disable=m,n.enable=C,n.enabled=a,n.humanize=t(585),n.destroy=d,Object.keys(o).forEach(u=>{n[u]=o[u]}),n.names=[],n.skips=[],n.formatters={};function l(u){let f=0;for(let h=0;h<u.length;h++)f=(f<<5)-f+u.charCodeAt(h),f|=0;return n.colors[Math.abs(f)%n.colors.length]}n.selectColor=l;function n(u){let f,h=null,w,v;function b(...y){if(!b.enabled)return;const F=b,k=Number(new Date),N=k-(f||k);F.diff=N,F.prev=f,F.curr=k,f=k,y[0]=n.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let _=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(A,z)=>{if(A==="%%")return"%";_++;const S=n.formatters[z];if(typeof S=="function"){const W=y[_];A=S.call(F,W),y.splice(_,1),_--}return A}),n.formatArgs.call(F,y),(F.log||n.log).apply(F,y)}return b.namespace=u,b.useColors=n.useColors(),b.color=n.selectColor(u),b.extend=g,b.destroy=n.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(w!==n.namespaces&&(w=n.namespaces,v=n.enabled(u)),v),set:y=>{h=y}}),typeof n.init=="function"&&n.init(b),b}function g(u,f){const h=n(this.namespace+(typeof f>"u"?":":f)+u);return h.log=this.log,h}function C(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];let f;const h=(typeof u=="string"?u:"").split(/[\s,]+/),w=h.length;for(f=0;f<w;f++)h[f]&&(u=h[f].replace(/\*/g,".*?"),u[0]==="-"?n.skips.push(new RegExp("^"+u.slice(1)+"$")):n.names.push(new RegExp("^"+u+"$")))}function m(){const u=[...n.names.map(i),...n.skips.map(i).map(f=>"-"+f)].join(",");return n.enable(""),u}function a(u){if(u[u.length-1]==="*")return!0;let f,h;for(f=0,h=n.skips.length;f<h;f++)if(n.skips[f].test(u))return!1;for(f=0,h=n.names.length;f<h;f++)if(n.names[f].test(u))return!0;return!1}function i(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}r.exports=s},833:(r,e,t)=>{var s=t(19);e.formatArgs=l,e.save=n,e.load=g,e.useColors=o,e.storage=C(),e.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function l(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;a.splice(1,0,i,"color: inherit");let c=0,d=0;a[0].replace(/%[a-zA-Z%]/g,u=>{u!=="%%"&&(c++,u==="%c"&&(d=c))}),a.splice(d,0,i)}e.log=console.debug||console.log||(()=>{});function n(a){try{a?e.storage.setItem("debug",a):e.storage.removeItem("debug")}catch{}}function g(){let a;try{a=e.storage.getItem("debug")}catch{}return!a&&typeof s<"u"&&"env"in s&&(a=s.env.DEBUG),a}function C(){try{return localStorage}catch{}}r.exports=t(736)(e);const{formatters:m}=r.exports;m.j=function(a){try{return JSON.stringify(a)}catch(i){return"[UnexpectedJSONParseError]: "+i.message}}}},q={};function E(r){var e=q[r];if(e!==void 0)return e.exports;var t=q[r]={exports:{}};return ce[r](t,t.exports,E),t.exports}E.n=r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return E.d(e,{a:e}),e},E.d=(r,e)=>{for(var t in e)E.o(e,t)&&!E.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})},E.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);const G=Symbol("Comlink.proxy"),ue=Symbol("Comlink.endpoint"),le=Symbol("Comlink.releaseProxy"),D=Symbol("Comlink.finalizer"),O=Symbol("Comlink.thrown"),J=r=>typeof r=="object"&&r!==null||typeof r=="function",fe={canHandle:r=>J(r)&&r[G],serialize(r){const{port1:e,port2:t}=new MessageChannel;return U(r,e),[t,[t]]},deserialize(r){return r.start(),he(r)}},de={canHandle:r=>J(r)&&O in r,serialize({value:r}){let e;return r instanceof Error?e={isError:!0,value:{message:r.message,name:r.name,stack:r.stack}}:e={isError:!1,value:r},[e,[]]},deserialize(r){throw r.isError?Object.assign(new Error(r.value.message),r.value):r.value}},Y=new Map([["proxy",fe],["throw",de]]);function ge(r,e){for(const t of r)if(e===t||t==="*"||t instanceof RegExp&&t.test(e))return!0;return!1}function U(r,e=globalThis,t=["*"]){e.addEventListener("message",function s(o){if(!o||!o.data)return;if(!ge(t,o.origin)){console.warn(`Invalid origin '${o.origin}' for comlink proxy`);return}const{id:l,type:n,path:g}=Object.assign({path:[]},o.data),C=(o.data.argumentList||[]).map(T);let m;try{const a=g.slice(0,-1).reduce((c,d)=>c[d],r),i=g.reduce((c,d)=>c[d],r);switch(n){case"GET":m=i;break;case"SET":a[g.slice(-1)[0]]=T(o.data.value),m=!0;break;case"APPLY":m=i.apply(a,C);break;case"CONSTRUCT":{const c=new i(...C);m=be(c)}break;case"ENDPOINT":{const{port1:c,port2:d}=new MessageChannel;U(r,d),m=we(c,[c])}break;case"RELEASE":m=void 0;break;default:return}}catch(a){m={value:a,[O]:0}}Promise.resolve(m).catch(a=>({value:a,[O]:0})).then(a=>{const[i,c]=I(a);e.postMessage(Object.assign(Object.assign({},i),{id:l}),c),n==="RELEASE"&&(e.removeEventListener("message",s),Q(e),D in r&&typeof r[D]=="function"&&r[D]())}).catch(a=>{const[i,c]=I({value:new TypeError("Unserializable return value"),[O]:0});e.postMessage(Object.assign(Object.assign({},i),{id:l}),c)})}),e.start&&e.start()}function me(r){return r.constructor.name==="MessagePort"}function Q(r){me(r)&&r.close()}function he(r,e){return $(r,[],e)}function P(r){if(r)throw new Error("Proxy has been released and is not useable")}function X(r){return L(r,{type:"RELEASE"}).then(()=>{Q(r)})}const R=new WeakMap,j="FinalizationRegistry"in globalThis&&new FinalizationRegistry(r=>{const e=(R.get(r)||0)-1;R.set(r,e),e===0&&X(r)});function pe(r,e){const t=(R.get(e)||0)+1;R.set(e,t),j&&j.register(r,e,r)}function Ce(r){j&&j.unregister(r)}function $(r,e=[],t=function(){}){let s=!1;const o=new Proxy(t,{get(l,n){if(P(s),n===le)return()=>{Ce(o),X(r),s=!0};if(n==="then"){if(e.length===0)return{then:()=>o};const g=L(r,{type:"GET",path:e.map(C=>C.toString())}).then(T);return g.then.bind(g)}return $(r,[...e,n])},set(l,n,g){P(s);const[C,m]=I(g);return L(r,{type:"SET",path:[...e,n].map(a=>a.toString()),value:C},m).then(T)},apply(l,n,g){P(s);const C=e[e.length-1];if(C===ue)return L(r,{type:"ENDPOINT"}).then(T);if(C==="bind")return $(r,e.slice(0,-1));const[m,a]=Z(g);return L(r,{type:"APPLY",path:e.map(i=>i.toString()),argumentList:m},a).then(T)},construct(l,n){P(s);const[g,C]=Z(n);return L(r,{type:"CONSTRUCT",path:e.map(m=>m.toString()),argumentList:g},C).then(T)}});return pe(o,r),o}function ye(r){return Array.prototype.concat.apply([],r)}function Z(r){const e=r.map(I);return[e.map(t=>t[0]),ye(e.map(t=>t[1]))]}const K=new WeakMap;function we(r,e){return K.set(r,e),r}function be(r){return Object.assign(r,{[G]:!0})}function I(r){for(const[e,t]of Y)if(t.canHandle(r)){const[s,o]=t.serialize(r);return[{type:"HANDLER",name:e,value:s},o]}return[{type:"RAW",value:r},K.get(r)||[]]}function T(r){switch(r.type){case"HANDLER":return Y.get(r.name).deserialize(r.value);case"RAW":return r.value}}function L(r,e,t){return new Promise(s=>{const o=ve();r.addEventListener("message",function l(n){!n.data||!n.data.id||n.data.id!==o||(r.removeEventListener("message",l),s(n.data))}),r.start&&r.start(),r.postMessage(Object.assign({id:o},e),t)})}function ve(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function Fe(){return console.log}function ee(){self.close()}const xe={ready:!0};var Ee=E(833),re=E.n(Ee);const Te=r=>{const t=(()=>{if(typeof window<"u"&&window.crypto)return window.crypto;if(typeof globalThis<"u"&&globalThis.crypto)return globalThis.crypto})();if(!t)throw new Error("randomBytes UnsupportedEnvironment");const s=new Uint8Array(r),o=65536;if(r>o)for(let l=0;l<r;l+=o)t.getRandomValues(s.subarray(l,l+o));else t.getRandomValues(s);return s};class ke{constructor(){this.memStore={},this.logger=re()("bb.js:bb_wasm_base")}getImportObj(e){return{wasi_snapshot_preview1:{random_get:(s,o)=>{s=s>>>0;const l=Te(o);this.getMemory().set(l,s)},clock_time_get:(s,o,l)=>{l=l>>>0;const n=BigInt(new Date().getTime())*1000000n;new DataView(this.getMemory().buffer).setBigUint64(l,n,!0)},proc_exit:()=>{throw this.logger("PANIC: proc_exit was called."),new Error}},env:{logstr:s=>{const o=this.stringFromAddress(s),l=this.getMemory(),n=`${o} (mem: ${(l.length/(1024*1024)).toFixed(2)}MiB)`;this.logger(n)},get_data:(s,o)=>{const l=this.stringFromAddress(s);o=o>>>0;const n=this.memStore[l];if(!n){this.logger(`get_data miss ${l}`);return}this.writeMemory(o,n)},set_data:(s,o,l)=>{const n=this.stringFromAddress(s);o=o>>>0,this.memStore[n]=this.getMemorySlice(o,o+l)},memory:e}}}exports(){return this.instance.exports}call(e,...t){if(!this.exports()[e])throw new Error(`WASM function ${e} not found.`);try{return this.exports()[e](...t)>>>0}catch(s){const o=`WASM function ${e} aborted, error: ${s}`;throw this.logger(o),this.logger(s.stack),s}}memSize(){return this.getMemory().length}getMemorySlice(e,t){return this.getMemory().subarray(e,t).slice()}writeMemory(e,t){this.getMemory().set(t,e)}getMemory(){return new Uint8Array(this.memory.buffer)}stringFromAddress(e){e=e>>>0;const t=this.getMemory();let s=e;for(;t[s]!==0;++s);return new TextDecoder("ascii").decode(t.slice(e,s))}}class _e extends ke{async initThread(e,t){this.logger=Fe()||this.logger,this.memory=t,this.instance=await WebAssembly.instantiate(e,this.getImportObj(this.memory))}destroy(){ee()}getImportObj(e){const t=super.getImportObj(e);return{...t,wasi:{"thread-spawn":()=>{this.logger("PANIC: threads cannot spawn threads!"),this.logger(new Error().stack),ee()}},env:{...t.env,env_hardware_concurrency:()=>1}}}}addEventListener("message",r=>{r.data.debug&&re().enable(r.data.debug)}),U(new _e),postMessage(xe)}()),B}ae()})();
