(function(){"use strict";var q={};/*! For license information please see main.worker.js.LICENSE.txt */var G;function ce(){return G||(G=1,function(){var ue={19:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var r={exports:{}},n=r.exports={},o,i;function s(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?o=setTimeout:o=s}catch{o=s}try{typeof clearTimeout=="function"?i=clearTimeout:i=d}catch{i=d}})();function g(w){if(o===setTimeout)return setTimeout(w,0);if((o===s||!o)&&setTimeout)return o=setTimeout,setTimeout(w,0);try{return o(w,0)}catch{try{return o.call(null,w,0)}catch{return o.call(this,w,0)}}}function h(w){if(i===clearTimeout)return clearTimeout(w);if((i===d||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(w);try{return i(w)}catch{try{return i.call(null,w)}catch{return i.call(this,w)}}}var c=[],a=!1,u,m=-1;function l(){!a||!u||(a=!1,u.length?c=u.concat(c):m=-1,c.length&&f())}function f(){if(!a){var w=g(l);a=!0;for(var x=c.length;x;){for(u=c,c=[];++m<x;)u&&u[m].run();m=-1,x=c.length}u=null,a=!1,h(w)}}n.nextTick=function(w){var x=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)x[_-1]=arguments[_];c.push(new p(w,x)),c.length===1&&!a&&g(f)};function p(w,x){this.fun=w,this.array=x}p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={};function C(){}n.on=C,n.addListener=C,n.once=C,n.off=C,n.removeListener=C,n.removeAllListeners=C,n.emit=C,n.prependListener=C,n.prependOnceListener=C,n.listeners=function(w){return[]},n.binding=function(w){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(w){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};function v(){}var b=r.exports.browser,y=v,F=r.exports.binding,k=v,z=1,A={},H=v,S=v,D=v,O=v,U=v,ne="browser",se="browser",oe="browser",ie=[],ae={nextTick:r.exports.nextTick,title:r.exports.title,browser:b,env:r.exports.env,argv:r.exports.argv,version:r.exports.version,versions:r.exports.versions,on:r.exports.on,addListener:r.exports.addListener,once:r.exports.once,off:r.exports.off,removeListener:r.exports.removeListener,removeAllListeners:r.exports.removeAllListeners,emit:r.exports.emit,emitWarning:y,prependListener:r.exports.prependListener,prependOnceListener:r.exports.prependOnceListener,listeners:r.exports.listeners,binding:F,cwd:r.exports.cwd,chdir:r.exports.chdir,umask:r.exports.umask,exit:k,pid:z,features:A,kill:H,dlopen:S,uptime:D,memoryUsage:O,uvCounters:U,platform:ne,arch:se,execPath:oe,execArgv:ie};e.addListener=r.exports.addListener,e.arch=se,e.argv=r.exports.argv,e.binding=F,e.browser=b,e.chdir=r.exports.chdir,e.cwd=r.exports.cwd,e.default=ae,e.dlopen=S,e.emit=r.exports.emit,e.emitWarning=y,e.env=r.exports.env,e.execArgv=ie,e.execPath=oe,e.exit=k,e.features=A,e.kill=H,e.listeners=r.exports.listeners,e.memoryUsage=O,e.nextTick=r.exports.nextTick,e.off=r.exports.off,e.on=r.exports.on,e.once=r.exports.once,e.pid=z,e.platform=ne,e.prependListener=r.exports.prependListener,e.prependOnceListener=r.exports.prependOnceListener,e.removeAllListeners=r.exports.removeAllListeners,e.removeListener=r.exports.removeListener,e.title=r.exports.title,e.umask=r.exports.umask,e.uptime=D,e.uvCounters=U,e.version=r.exports.version,e.versions=r.exports.versions,e=t.exports=ae},585:t=>{var e=1e3,r=e*60,n=r*60,o=n*24,i=o*7,s=o*365.25;t.exports=function(a,u){u=u||{};var m=typeof a;if(m==="string"&&a.length>0)return d(a);if(m==="number"&&isFinite(a))return u.long?h(a):g(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))};function d(a){if(a=String(a),!(a.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(u){var m=parseFloat(u[1]),l=(u[2]||"ms").toLowerCase();switch(l){case"years":case"year":case"yrs":case"yr":case"y":return m*s;case"weeks":case"week":case"w":return m*i;case"days":case"day":case"d":return m*o;case"hours":case"hour":case"hrs":case"hr":case"h":return m*n;case"minutes":case"minute":case"mins":case"min":case"m":return m*r;case"seconds":case"second":case"secs":case"sec":case"s":return m*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function g(a){var u=Math.abs(a);return u>=o?Math.round(a/o)+"d":u>=n?Math.round(a/n)+"h":u>=r?Math.round(a/r)+"m":u>=e?Math.round(a/e)+"s":a+"ms"}function h(a){var u=Math.abs(a);return u>=o?c(a,u,o,"day"):u>=n?c(a,u,n,"hour"):u>=r?c(a,u,r,"minute"):u>=e?c(a,u,e,"second"):a+" ms"}function c(a,u,m,l){var f=u>=m*1.5;return Math.round(a/m)+" "+l+(f?"s":"")}},736:(t,e,r)=>{function n(o){s.debug=s,s.default=s,s.coerce=u,s.disable=h,s.enable=g,s.enabled=c,s.humanize=r(585),s.destroy=m,Object.keys(o).forEach(l=>{s[l]=o[l]}),s.names=[],s.skips=[],s.formatters={};function i(l){let f=0;for(let p=0;p<l.length;p++)f=(f<<5)-f+l.charCodeAt(p),f|=0;return s.colors[Math.abs(f)%s.colors.length]}s.selectColor=i;function s(l){let f,p=null,C,v;function b(...y){if(!b.enabled)return;const F=b,k=Number(new Date),z=k-(f||k);F.diff=z,F.prev=f,F.curr=k,f=k,y[0]=s.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let A=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(S,D)=>{if(S==="%%")return"%";A++;const O=s.formatters[D];if(typeof O=="function"){const U=y[A];S=O.call(F,U),y.splice(A,1),A--}return S}),s.formatArgs.call(F,y),(F.log||s.log).apply(F,y)}return b.namespace=l,b.useColors=s.useColors(),b.color=s.selectColor(l),b.extend=d,b.destroy=s.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(C!==s.namespaces&&(C=s.namespaces,v=s.enabled(l)),v),set:y=>{p=y}}),typeof s.init=="function"&&s.init(b),b}function d(l,f){const p=s(this.namespace+(typeof f>"u"?":":f)+l);return p.log=this.log,p}function g(l){s.save(l),s.namespaces=l,s.names=[],s.skips=[];let f;const p=(typeof l=="string"?l:"").split(/[\s,]+/),C=p.length;for(f=0;f<C;f++)p[f]&&(l=p[f].replace(/\*/g,".*?"),l[0]==="-"?s.skips.push(new RegExp("^"+l.slice(1)+"$")):s.names.push(new RegExp("^"+l+"$")))}function h(){const l=[...s.names.map(a),...s.skips.map(a).map(f=>"-"+f)].join(",");return s.enable(""),l}function c(l){if(l[l.length-1]==="*")return!0;let f,p;for(f=0,p=s.skips.length;f<p;f++)if(s.skips[f].test(l))return!1;for(f=0,p=s.names.length;f<p;f++)if(s.names[f].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function u(l){return l instanceof Error?l.stack||l.message:l}function m(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}t.exports=n},833:(t,e,r)=>{var n=r(19);e.formatArgs=i,e.save=s,e.load=d,e.useColors=o,e.storage=g(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const a="color: "+this.color;c.splice(1,0,a,"color: inherit");let u=0,m=0;c[0].replace(/%[a-zA-Z%]/g,l=>{l!=="%%"&&(u++,l==="%c"&&(m=u))}),c.splice(m,0,a)}e.log=console.debug||console.log||(()=>{});function s(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function d(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof n<"u"&&"env"in n&&(c=n.env.DEBUG),c}function g(){try{return localStorage}catch{}}t.exports=r(736)(e);const{formatters:h}=t.exports;h.j=function(c){try{return JSON.stringify(c)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}}},X={};function M(t){var e=X[t];if(e!==void 0)return e.exports;var r=X[t]={exports:{}};return ue[t](r,r.exports,M),r.exports}M.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return M.d(e,{a:e}),e},M.d=(t,e)=>{for(var r in e)M.o(e,r)&&!M.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},M.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);const J=Symbol("Comlink.proxy"),le=Symbol("Comlink.endpoint"),fe=Symbol("Comlink.releaseProxy"),N=Symbol("Comlink.finalizer"),P=Symbol("Comlink.thrown"),Y=t=>typeof t=="object"&&t!==null||typeof t=="function",de={canHandle:t=>Y(t)&&t[J],serialize(t){const{port1:e,port2:r}=new MessageChannel;return B(t,e),[r,[r]]},deserialize(t){return t.start(),K(t)}},me={canHandle:t=>Y(t)&&P in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},Q=new Map([["proxy",de],["throw",me]]);function ge(t,e){for(const r of t)if(e===r||r==="*"||r instanceof RegExp&&r.test(e))return!0;return!1}function B(t,e=globalThis,r=["*"]){e.addEventListener("message",function n(o){if(!o||!o.data)return;if(!ge(r,o.origin)){console.warn(`Invalid origin '${o.origin}' for comlink proxy`);return}const{id:i,type:s,path:d}=Object.assign({path:[]},o.data),g=(o.data.argumentList||[]).map(E);let h;try{const c=d.slice(0,-1).reduce((u,m)=>u[m],t),a=d.reduce((u,m)=>u[m],t);switch(s){case"GET":h=a;break;case"SET":c[d.slice(-1)[0]]=E(o.data.value),h=!0;break;case"APPLY":h=a.apply(c,g);break;case"CONSTRUCT":{const u=new a(...g);h=be(u)}break;case"ENDPOINT":{const{port1:u,port2:m}=new MessageChannel;B(t,m),h=Ce(u,[u])}break;case"RELEASE":h=void 0;break;default:return}}catch(c){h={value:c,[P]:0}}Promise.resolve(h).catch(c=>({value:c,[P]:0})).then(c=>{const[a,u]=j(c);e.postMessage(Object.assign(Object.assign({},a),{id:i}),u),s==="RELEASE"&&(e.removeEventListener("message",n),Z(e),N in t&&typeof t[N]=="function"&&t[N]())}).catch(c=>{const[a,u]=j({value:new TypeError("Unserializable return value"),[P]:0});e.postMessage(Object.assign(Object.assign({},a),{id:i}),u)})}),e.start&&e.start()}function he(t){return t.constructor.name==="MessagePort"}function Z(t){he(t)&&t.close()}function K(t,e){return V(t,[],e)}function R(t){if(t)throw new Error("Proxy has been released and is not useable")}function ee(t){return T(t,{type:"RELEASE"}).then(()=>{Z(t)})}const W=new WeakMap,I="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(W.get(t)||0)-1;W.set(t,e),e===0&&ee(t)});function pe(t,e){const r=(W.get(e)||0)+1;W.set(e,r),I&&I.register(t,e,t)}function we(t){I&&I.unregister(t)}function V(t,e=[],r=function(){}){let n=!1;const o=new Proxy(r,{get(i,s){if(R(n),s===fe)return()=>{we(o),ee(t),n=!0};if(s==="then"){if(e.length===0)return{then:()=>o};const d=T(t,{type:"GET",path:e.map(g=>g.toString())}).then(E);return d.then.bind(d)}return V(t,[...e,s])},set(i,s,d){R(n);const[g,h]=j(d);return T(t,{type:"SET",path:[...e,s].map(c=>c.toString()),value:g},h).then(E)},apply(i,s,d){R(n);const g=e[e.length-1];if(g===le)return T(t,{type:"ENDPOINT"}).then(E);if(g==="bind")return V(t,e.slice(0,-1));const[h,c]=te(d);return T(t,{type:"APPLY",path:e.map(a=>a.toString()),argumentList:h},c).then(E)},construct(i,s){R(n);const[d,g]=te(s);return T(t,{type:"CONSTRUCT",path:e.map(h=>h.toString()),argumentList:d},g).then(E)}});return pe(o,t),o}function ye(t){return Array.prototype.concat.apply([],t)}function te(t){const e=t.map(j);return[e.map(r=>r[0]),ye(e.map(r=>r[1]))]}const re=new WeakMap;function Ce(t,e){return re.set(t,e),t}function be(t){return Object.assign(t,{[J]:!0})}function j(t){for(const[e,r]of Q)if(r.canHandle(t)){const[n,o]=r.serialize(t);return[{type:"HANDLER",name:e,value:n},o]}return[{type:"RAW",value:t},re.get(t)||[]]}function E(t){switch(t.type){case"HANDLER":return Q.get(t.name).deserialize(t.value);case"RAW":return t.value}}function T(t,e,r){return new Promise(n=>{const o=ve();t.addEventListener("message",function i(s){!s.data||!s.data.id||s.data.id!==o||(t.removeEventListener("message",i),n(s.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:o},e),r)})}function ve(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var Fe=M(833),L=M.n(Fe);function xe(){const t=typeof window<"u"?window:globalThis;return typeof SharedArrayBuffer<"u"&&t.crossOriginIsolated}function Me(t){return K(t)}function Ee(){return navigator.hardwareConcurrency}const ke={ready:!0};function Ae(t,e){t.addEventListener("message",function r(n){n.data&&n.data.ready===!0&&(t.removeEventListener("message",r),e())})}async function Te(){const t=new Worker(new URL("/assets/thread.worker-Bmp8F8et.js",self.location.href),{type:"module"}),e=L().disable();return L().enable(e),t.postMessage({debug:e}),await new Promise(r=>Ae(t,r)),t}const Se=t=>{const r=(()=>{if(typeof window<"u"&&window.crypto)return window.crypto;if(typeof globalThis<"u"&&globalThis.crypto)return globalThis.crypto})();if(!r)throw new Error("randomBytes UnsupportedEnvironment");const n=new Uint8Array(t),o=65536;if(t>o)for(let i=0;i<t;i+=o)r.getRandomValues(n.subarray(i,i+o));else r.getRandomValues(n);return n};class _e{constructor(){this.memStore={},this.logger=L()("bb.js:bb_wasm_base")}getImportObj(e){return{wasi_snapshot_preview1:{random_get:(n,o)=>{n=n>>>0;const i=Se(o);this.getMemory().set(i,n)},clock_time_get:(n,o,i)=>{i=i>>>0;const s=BigInt(new Date().getTime())*1000000n;new DataView(this.getMemory().buffer).setBigUint64(i,s,!0)},proc_exit:()=>{throw this.logger("PANIC: proc_exit was called."),new Error}},env:{logstr:n=>{const o=this.stringFromAddress(n),i=this.getMemory(),s=`${o} (mem: ${(i.length/(1024*1024)).toFixed(2)}MiB)`;this.logger(s)},get_data:(n,o)=>{const i=this.stringFromAddress(n);o=o>>>0;const s=this.memStore[i];if(!s){this.logger(`get_data miss ${i}`);return}this.writeMemory(o,s)},set_data:(n,o,i)=>{const s=this.stringFromAddress(n);o=o>>>0,this.memStore[s]=this.getMemorySlice(o,o+i)},memory:e}}}exports(){return this.instance.exports}call(e,...r){if(!this.exports()[e])throw new Error(`WASM function ${e} not found.`);try{return this.exports()[e](...r)>>>0}catch(n){const o=`WASM function ${e} aborted, error: ${n}`;throw this.logger(o),this.logger(n.stack),n}}memSize(){return this.getMemory().length}getMemorySlice(e,r){return this.getMemory().subarray(e,r).slice()}writeMemory(e,r){this.getMemory().set(r,e)}getMemory(){return new Uint8Array(this.memory.buffer)}stringFromAddress(e){e=e>>>0;const r=this.getMemory();let n=e;for(;r[n]!==0;++n);return new TextDecoder("ascii").decode(r.slice(e,n))}}class Le{constructor(e){this.wasm=e,this.allocs=[],this.inScratchRemaining=1024,this.outScratchRemaining=1024}getInputs(e){return e.map(r=>{if(typeof r=="object")if(r.length<=this.inScratchRemaining){const n=this.inScratchRemaining-=r.length;return this.wasm.writeMemory(n,r),n}else{const n=this.wasm.call("bbmalloc",r.length);return this.wasm.writeMemory(n,r),this.allocs.push(n),n}else return r})}getOutputPtrs(e){return e.map(r=>{const n=r||4;if(n<=this.outScratchRemaining)return this.outScratchRemaining-=n;{const o=this.wasm.call("bbmalloc",n);return this.allocs.push(o),o}})}addOutputPtr(e){e>=1024&&this.allocs.push(e)}freeAll(){for(const e of this.allocs)this.wasm.call("bbfree",e)}}class $ extends _e{constructor(){super(...arguments),this.workers=[],this.remoteWasms=[],this.nextWorker=0,this.nextThreadId=1}getNumThreads(){return this.workers.length+1}async init(e,r=Math.min(Ee(),$.MAX_THREADS),n=L()("bb.js:bb_wasm"),o=32,i=2**16){this.logger=n;const s=o*2**16/(1024*1024),d=i*2**16/(1024*1024),g=xe();this.logger(`Initializing bb wasm: initial memory ${o} pages ${s}MiB; max memory: ${i} pages, ${d}MiB; threads: ${r}; shared memory: ${g}`),this.memory=new WebAssembly.Memory({initial:o,maximum:i,shared:g});const h=await WebAssembly.instantiate(e,this.getImportObj(this.memory));this.instance=h,this.call("_initialize"),r>1&&(this.logger(`Creating ${r} worker threads`),this.workers=await Promise.all(Array.from({length:r-1}).map(Te)),this.remoteWasms=await Promise.all(this.workers.map(Me)),await Promise.all(this.remoteWasms.map(c=>c.initThread(e,this.memory))))}async destroy(){await Promise.all(this.workers.map(e=>e.terminate()))}getImportObj(e){const r=super.getImportObj(e);return{...r,wasi:{"thread-spawn":n=>{n=n>>>0;const o=this.nextThreadId++,i=this.nextWorker++%this.remoteWasms.length;return this.remoteWasms[i].call("wasi_thread_start",o,n).catch(this.logger),o}},env:{...r.env,env_hardware_concurrency:()=>this.remoteWasms.length+1}}}callWasmExport(e,r,n){const o=new Le(this),i=o.getInputs(r),s=o.getOutputPtrs(n);this.call(e,...i,...s);const d=this.getOutputArgs(n,s,o);return o.freeAll(),d}getOutputArgs(e,r,n){return e.map((o,i)=>{if(o)return this.getMemorySlice(r[i],r[i]+o);const s=this.getMemorySlice(r[i],r[i]+4),d=new DataView(s.buffer,s.byteOffset,s.byteLength).getUint32(0,!0);n.addOutputPtr(d);const g=this.getMemorySlice(d,d+4),h=new DataView(g.buffer,g.byteOffset,g.byteLength).getUint32(0,!1);return this.getMemorySlice(d+4,d+4+h)})}}$.MAX_THREADS=32,addEventListener("message",t=>{t.data.debug&&L().enable(t.data.debug)}),B(new $),postMessage(ke)}()),q}ce()})();
